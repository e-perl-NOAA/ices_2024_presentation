---
format: 
  revealjs:
    pagetitle: "ICES 2024 Presentation"
    theme: [default,style.scss]
revealjs-plugins:
  - highlightword
from: markdown+emoji
---

## How do fisheries scientists develop software well? {.title}

<h3>Lessons learned from the ADMB shutdown</h3>
  
<h3>[Elizabeth Perl](mailto:elizabeth.gugliotti@noaa.gov)</h3> <h5>ECS, NOAA Fisheries</h5> <br>
<h4>[Andrea Havron](mailto:andrea.havron@noaa.gov)</h4> <h5>NOAA Fisheries</h5> <br>
<h4>[Ian Taylor](mailto:ian.taylor@noaa.gov)</h4> <h5>NOAA Fisheries</h5> <br>

![](images/fish_laptop.png){.absolute left=375 top=190 width="600"}
---

## What I went to school for:

::: columns
::: {.column width="33.3%"}
![](images/dive_square.png){width="300" height="275"} ![](turtle.png){width="300" height="275"}
:::

::: {.column width="33.3%"}
![](images/rov.png){width="300" height="275"} ![](sub.png){width="300" height="275"}
:::

::: {.column width="33.3%"}
![](images/rov_drive.png){width="300" height="275"} ![](dive_fun.png){width="300" height="275"}
:::
:::

::: {.notes}
Maybe like many of you, this is what I went to school for.
:::

---

## What I do now:

![](images/mitchell-luo-FWoq_ldWlNQ-unsplash.jpg){width="500" height="450"}
![](images/RStudio.png){width="500" height="450"}


. . .

::: {.r-stack}
ðŸ˜±ðŸ˜«ðŸ¤¬
:::


::: {.notes}
But now we find ourselves in spaces that look more like this (with a lot of 
frustration).
:::

---

## Can we build it? Yes we can!


![](images/Bob_the_builder.png){.absolute top=380}
`ggplot(data)`{.absolute style="top:85%; left:55%; transform:rotate(38deg);"}
`x = numpy.array([0,1,2,3,4,5])`{.absolute style="color:#76BC21; font-size:22px; top:82%; left:22%; transform:rotate(-35deg);"}
`git fetch --tags`{.absolute style="color:#007582; font-size:30px; top:70%; left:70%; transform:rotate(-20deg);"}
`mv file newfile`{.absolute style="color:#0085CA; font-size:25px; top:90%; left:80%; transform:rotate(5deg);"}
`docker pull rocker/rstudio`{.absolute style="color:#0085CA; font-size:35px; top:45%; left:45%; transform:rotate(-10deg);"}
`if(i=10) biasadj(i);`{.absolute style="color:#D97146; font-size:25px; top:60%; left:20%; transform:rotate(20deg);"}
`sum_new <- function(x,y){x+y}`{.absolute style="color:#D02C2F; font-size:18px; top:55%; left:75%; transform:rotate(15deg);"}
`function(x) x/12`{.absolute style="color:#76BC21; font-size:45px; top:40%; left:10%;"}
`chmod a+x file`{.absolute style="color:#D97146; font-size:30px; top:15%; left:77%;transform:rotate(20deg);"}
`install_github("pkg/pkgname")`{.absolute style="font-size:20px; top:18%; left:30%; transform:rotate(15deg);"}
`h3 {font-size: 25}`{.absolute style="color:#007582; font-size:30px; top:25%; left:50%;transform:rotate(-35deg);"}
`import numpy as np`{.absolute style="color:#D02C2F; font-size:35px; top:95%; left:37%;"}
`<div class="navbar">`{.absolute style="color:#D02C2F; font-size:20px; top:30%; left:70%;"}
`\bibliographystyle{JournalBiblio/cjfas}`{.absolute style="color:#007582; font-size:20px; top:32%; left:0%;transform:rotate(-15deg);"}
`<li><p>text</p></li>`{.absolute style="color:#007582; font-size:30px; top:18%; left:2%;"}
`echo "text"`{.absolute style="color:#0085CA; font-size:18px; top:75%; left:25%;"}



::: {.notes}
A lot of times out of necessity because there is no money to get someone to 
create tools, packages, programs, etc. for us, so we build it ourselves.
:::

---

## For the most part, we do pretty well!


![](https://www.rstudio.com/wp-content/uploads/2018/10/RStudio-Logo-Flat.png){.absolute top=125 width="300"}
![](images/Github-logo.png){.absolute left=410 width="215"}
![](images/Docker.png){.absolute left=760 width="230"}

![](imgaes/Python-Logo.png){.absolute top=350 width="315"}

![](images/Kubernetes-Logo.png){.absolute left=375 top=320 width="300"}

![](images/Jupyter_logo.svg.png){.absolute left=785 top=295 width="175"}

![](images/code-stable.png){.absolute top=505 left=70 width="175"}

![](images/singularity-logo.png){.absolute left=425 top=500 width="200"}

![](images/Microsoft_Azure_Logo.svg.png){.absolute top=550 left=730 width="280"}



::: {.notes}
We have embraced tools like RStudio, Jupyter, GitHub, Docker, and more.
:::

---

## HOWEVER

We still lack the knowledge, funding, or time to do:

- Unit tests/testing
- Documentation
- Open-source code management
- Long-term maintenance
- Sun-setting

And we suffer the consequences...

---

## Sun-setting of ADMB
![](images/ADMB_logo.png){.absolute bottom=600 left=500 width="300"}

:::{.nopad}
- [ADMB](https://www.admb-project.org/): automatic differentiation (AD) application used to build stock assessment models
  - Stock Synthesis (SS3)
  - Beaufort Assessment Model (BAM)
  - General Model for Assessing Crustacean Stocks (GMACs)
- ADMB funding ended March 2024
- March 2024 ADMB Foundation meeting to discuss orderly shutdown:
  - Final release of ADMB 13.2 March 15, 2024
  - Docker image of ADMB 
  - No new feature development as sole developer leaves
  - Bug fixes and user group support?
:::


::: {.notes}
The docker image of admb was an attempt to provide future stability.
Not the example that we want to follow
:::

---

## Downstream problems
:::{.nopad}
- Building models locally using ADMB
  - Eventual library mismatches will make this impossible
- The docker images:
  - Steep learning curve
  - Works for now...new architectures in the future can become and issue (Windows 2022 and MacOS arm-64)
- No concrete plan for bug fixes
  - The maintainer has moved on to another job, cannot be expected to continue maintenance for free
  - One volunteer to try to handle bug fixes
- User group support
  - Slow responses by a select few that have a better understanding of ADMB

- Trying to build models using ADMB will eventually require users to have a greater amount of computer and software knowledge
- Inside-out knowledge of ADMB is hard to find and will become even more difficult.
- There are still stock assessment models that heavily depend on ADMB and there was little planning on how phase out ADMB while ensuring that these models will be unaffected
:::

---

## Improving software maintenance
:::{.nopad}
  - Software maintenance plans
  - Clear documentation and <br> user manuals/tutorials
  - Version control
  - Automated testing (unit, integration, 
    <br> end-to-end)
  - Regular code review
  - CI/CD
  - Encourage continuous learning for <br>
    the development team, getting user <br>
    feedback, and providing user support
:::

![](images/software_maintenance_transparent.png){.absolute top=140 left=570 width="550"}

::: {style="font-size: 60%"}
<br>
<br>
Sourced from: https://www.simform.com/blog/software-maintenance/
:::


::: {.notes}
Software maintenance plans help keep software up with changing needs and adapt to new technologies and help enhance the efficiency of the product.
Clear documentation of the code base, equations, and architecture, including inline comments, README files, comprehensive user manuals, and tutorials for easy understanding and troubleshooting. 
:::

---

## Fostering developer and user communities {style="font-size=60%"}
:::{.nopad}
- Fundamental to thriving software communities
- Useful way support and maintain software after it has been phased out and/or the maintainer changes

- Ways to build a strong developer community
  - Chat platform :speech_balloon:
  - Active developer forums :raised_hand:
  - Take advantage of open source :computer:
  - Recurring office hours :office:
  - Developer events :circus_tent:
  - Example: [GitHub community](https://github.com/orgs/community/discussions/)
:::

---

## Creating software development teams that have diverse expertise
:::{.nopad}
- Software development is complex and involves many skills such as:
  - coding
  - design & UI/UX
  - project management
  - statistics
  - mathematics
  - AI
  - cloud computing
  - computer science
  - systems architecture and administration
  - subject matter expertise (population dynamics, MSE, etc.)
  
- We should be incorporating people with expertise in these skills into our software development projects to help ensure that all aspects of the project are considered, which can lead to more well-rounded software products
:::

---

## Application to other softwares

- SS3
- MULTIFAN-CL
- TMB
- FIMS

---

## Great idea, even greater hurdles to make it happen

- 

::: {.notes}
This is all well in good but I do recognize that there are some major hurdles to get us where we need to be, the biggest being time and money. But there is some low-hanging fruit here that I think we can start to take advantage of.

:::
